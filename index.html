<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOYBOX OS</title>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="bootScreen">
        <div class="boot-logo">
            <img src="images/ghost.png" alt="Ghost" onerror="this.src='https://placehold.co/150x150/000/fff?text=👻'">
        </div>
        <div id="bootContainer"></div>
    </div>

    <div id="iconReadme" class="desktop-icon" style="top: 20px; left: 20px;">
        <div class="icon-img">📝</div>
        <div class="icon-label">Readme.txt</div>
    </div>
    <div id="iconTop" class="desktop-icon" style="top: 120px; left: 20px;">
        <div class="icon-img">🏠</div>
        <div class="icon-label">Top</div>
    </div>
    <div id="iconAbout" class="desktop-icon" style="top: 220px; left: 20px;">
        <div class="icon-img">👤</div>
        <div class="icon-label">Profile</div>
    </div>
    <div id="iconWork" class="desktop-icon" style="top: 320px; left: 20px;">
        <div class="icon-img">📁</div>
        <div class="icon-label">Works</div>
    </div>
    <div id="iconIllust" class="desktop-icon" style="top: 420px; left: 20px;">
        <div class="icon-img">🎨</div>
        <div class="icon-label">Illust</div>
    </div>
    <div id="iconContact" class="desktop-icon" style="top: 520px; left: 20px;">
        <div class="icon-img">✉️</div>
        <div class="icon-label">Contact</div>
    </div>
    
    <div id="iconDanger" class="desktop-icon" style="top: 20px; right: 20px;">
        <div class="icon-img">💀</div>
        <div class="icon-label">DANGER</div>
    </div>

    <div id="mainWindow" class="window-frame draggable-window" style="display:none;">
        <div class="window-header">
            <span>🏠 Main Menu</span>
            <div class="window-controls">
                <button id="minBtn" class="control-btn btn-min"></button>
                <button id="maxBtn" class="control-btn btn-max"></button>
                <button id="closeBtn" class="control-btn btn-close"></button>
            </div>
        </div>
        <div class="window-body">
            <h1>Welcome to TOYBOX</h1>
            <p>ここは私の頭の中のおもちゃ箱です。</p>
            <button id="gameStartBtn" class="pop-button">バグと戦う (RPG Start)</button>
        </div>
    </div>

    <div id="aboutWindow" class="window-frame draggable-window" style="display:none;">
        <div class="window-header">
            <span>👤 Profile</span>
            <div class="window-controls">
                <button id="aboutMinBtn" class="control-btn btn-min"></button>
                <button id="aboutMaxBtn" class="control-btn btn-max"></button>
                <button id="aboutCloseBtn" class="control-btn btn-close"></button>
            </div>
        </div>
        <div class="window-body">
            <div class="prop-tabs">
                <div class="prop-tab active" data-tab="tab1">Main</div>
                <div class="prop-tab" data-tab="tab2">Skill</div>
            </div>
            <div class="prop-body">
                <div id="tab1" class="prop-content active">
                    <p>名前：[あなたの名前]</p>
                    <p>職業：Web Creator</p>
                    <p>好きなもの：レトロゲーム、ドット絵</p>
                </div>
                <div id="tab2" class="prop-content">
                    <p>HTML/CSS: <div class="skill-bar"><div class="bar"><div class="fill" style="width:90%"></div></div></div></p>
                    <p>JavaScript: <div class="skill-bar"><div class="bar"><div class="fill" style="width:70%"></div></div></div></p>
                </div>
            </div>
            <button id="aboutOkBtn" class="pop-button" style="margin-top:10px;">OK</button>
        </div>
    </div>

    <div id="workWindow" class="window-frame draggable-window" style="display:none;">
        <div id="workHeader" class="window-header">
            <span class="window-title">📁 Works</span>
            <div class="window-controls">
                <button id="workCloseBtn" class="control-btn btn-close"></button>
            </div>
        </div>
        <div class="window-body">
            <div class="gallery-container">
                <img id="galleryImg" src="" alt="Gallery" style="max-width:100%; height:200px; object-fit:contain; border:2px solid black; background:#eee;">
                <h3 id="galleryTitle">Loading...</h3>
                <p id="galleryCounter">0 / 0</p>
                <button id="galleryPrevBtn" class="pop-button">◀</button>
                <button id="galleryNextBtn" class="pop-button">▶</button>
            </div>
            
            <hr>
            
            <div id="passwordFormSection">
                <p>🔒 Secret Area</p>
                <input type="password" id="workPasswordInput" placeholder="Password">
                <button id="workPasswordSubmitBtn" class="pop-button">解除</button>
                <p id="passwordErrorMsg" style="color:red; display:none;">パスワードが違います</p>
            </div>
            <div id="secretWorkContent" style="display:none;"></div>
        </div>
    </div>

    <div id="illustWindow" class="window-frame draggable-window" style="display:none;">
        <div class="window-header">
            <span>🎨 Illust</span>
            <div class="window-controls">
                <button id="illustMinBtn" class="control-btn btn-min"></button>
                <button id="illustMaxBtn" class="control-btn btn-max"></button>
                <button id="illustCloseBtn" class="control-btn btn-close"></button>
            </div>
        </div>
        <div class="window-body">
            <p>イラスト展示室</p>
            <div class="work-item">
                <div class="work-thumbnail"><img src="https://placehold.co/100x100" onclick="openModal(this.src)"></div>
                <div>ここにイラストが並びます</div>
            </div>
        </div>
    </div>

    <div id="readmeWindow" class="window-frame draggable-window" style="display:none;">
        <div class="window-header">
            <span>📝 Readme.txt</span>
            <div class="window-controls">
                <button id="readmeMinBtn" class="control-btn btn-min"></button>
                <button id="readmeMaxBtn" class="control-btn btn-max"></button>
                <button id="readmeCloseBtn" class="control-btn btn-close"></button>
            </div>
        </div>
        <div class="window-body notepad-body">
            <div class="notepad-content">
TOYBOX OS v1.0
----------------
このサイトはポートフォリオです。
ドラッグでウィンドウを動かせます。
右上のドクロアイコンは押さないでください。
            </div>
        </div>
    </div>

    <div id="contactWindow" class="window-frame draggable-window" style="display:none;">
        <div class="window-header">
            <span>✉️ Contact</span>
            <div class="window-controls">
                <button id="contactMinBtn" class="control-btn btn-min"></button>
                <button id="contactMaxBtn" class="control-btn btn-max"></button>
                <button id="contactCloseBtn" class="control-btn btn-close"></button>
            </div>
        </div>
        <div class="window-body">
            <p>お問い合わせはこちら</p>
            <textarea style="width:100%; height:100px; margin-bottom:10px;"></textarea>
            <button id="contactSendBtn" class="pop-button">送信</button>
        </div>
    </div>

    <div id="sentPopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:99999; justify-content:center; align-items:center;">
        <div class="window-frame" style="position:relative; top:auto; left:auto; transform:none; width:300px;">
            <div class="window-header"><span>Message</span><button id="sentCloseX" class="control-btn btn-close"></button></div>
            <div class="window-body">
                <p>送信しました！</p>
                <button id="sentBtnOk" class="pop-button">OK</button>
            </div>
        </div>
    </div>
    
    <div id="imageModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100000; justify-content:center; align-items:center;" onclick="closeModal()">
        <img id="modalImg" src="" style="max-width:90%; max-height:90%; border:5px solid white;">
    </div>

    <div id="rpgOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:20000; color:white; font-family:'DotGothic16', sans-serif;">
        <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width:100%; max-width:600px; text-align:center;">
            
            <div id="rpgEnemy" style="margin-bottom:20px;">
                <img src="images/bug_enemy.png" alt="BUG" style="width:150px; image-rendering:pixelated;" onerror="this.src='https://placehold.co/150x150/ff0000/fff?text=👾'">
                <div id="enemyHpBar" style="width:100%; height:10px; background:red; margin:10px auto; max-width:200px; border:2px solid white;"></div>
            </div>
            <div id="rpgDamage" style="position:absolute; top:40%; left:50%; transform:translateX(-50%); font-size:3rem; color:red; font-weight:bold; opacity:0;"></div>

            <div style="background:black; border:4px solid white; padding:20px; border-radius:10px; text-align:left; min-height:100px; margin-bottom:10px;">
                <p id="rpgText">あ！　やせいの　バグが　とびだしてきた！</p>
            </div>

            <div style="display:flex; justify-content:space-between; background:black; border:2px solid white; padding:10px; margin-bottom:10px;">
                <span>PLAYER HP</span>
                <div style="width:150px; background:#333; height:20px; border:1px solid white;">
                    <div id="playerHpBar" style="width:100%; height:100%; background:#00ff00;"></div>
                </div>
                <span id="playerHpNum">100/100</span>
            </div>

            <div id="mainCommandBox" style="display:flex; justify-content:space-around; background:black; border:2px solid white; padding:10px;">
                <button id="cmdAttack" class="pop-button">たたかう</button>
                <button id="cmdSkill" class="pop-button">スキル</button>
                <button id="cmdRun" class="pop-button">にげる</button>
            </div>
            
            <div id="skillCommandBox" style="display:none; flex-wrap:wrap; justify-content:center; gap:10px; background:black; border:2px solid white; padding:10px;">
                <button class="skill-item pop-button" data-skill="debug">デバッグ</button>
                <button class="skill-item pop-button" data-skill="reload">再読み込み</button>
                <button class="skill-item pop-button" data-skill="force">強制終了</button>
                <button id="skillBack" class="pop-button" style="background:#555;">もどる</button>
            </div>
        </div>
    </div>

    <div id="bsodScreen" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#0000aa; color:white; z-index:9999999; padding:50px; font-family:'Courier New', monospace;">
        <h1>A problem has been detected...</h1>
        <p>SYSTEM_SERVICE_EXCEPTION</p>
        <p>Collecting data for crash dump...</p>
        <p>Initializing... <span id="bsodPercent">0</span>%</p>
    </div>

    <div id="startMenu" style="display:none; position:fixed; bottom:42px; left:0; width:200px; background:#c0c0c0; border:2px solid white; box-shadow:4px 4px 0 black; flex-direction:column; z-index:9001;">
        <div style="background:#000080; color:white; padding:5px 10px; font-weight:bold;">TOYBOX 95</div>
        <div id="menuTop" style="padding:10px; cursor:pointer; border-bottom:1px dotted gray;">🏠 Top</div>
        <div id="menuAbout" style="padding:10px; cursor:pointer; border-bottom:1px dotted gray;">👤 Profile</div>
        <div id="menuWork" style="padding:10px; cursor:pointer; border-bottom:1px dotted gray;">📁 Works</div>
        <div id="menuIllust" style="padding:10px; cursor:pointer; border-bottom:1px dotted gray;">🎨 Illust</div>
        <div id="menuContact" style="padding:10px; cursor:pointer; border-bottom:1px dotted gray;">✉️ Contact</div>
        <div id="menuShutdown" style="padding:10px; cursor:pointer; background:#ffcccb;">🔌 Shutdown</div>
    </div>

    <div class="taskbar">
        <button id="startBtn" class="start-btn">🐻 START</button>
        <div id="taskbarClock" style="border:2px solid gray; padding:2px 10px; background:#e0e0e0;">00:00</div>
    </div>

    <div id="shutdownScreen" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:99999999; opacity:0;"></div>

    <script src="script.js"></script>
</body>
</html>
